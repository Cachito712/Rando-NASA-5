<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide de RandonnÃ©e PÃ©destre</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h1 { color: #2563eb; text-align: center; border-bottom: 3px solid #2563eb; padding-bottom: 10px; }
        
        /* Menu et Liens */
        .menu-section { margin-bottom: 25px; }
        .menu-section h2 { color: #1e40af; font-size: 1.2em; margin-bottom: 10px; }
        
        .liens-utiles { 
            background: #eff6ff; 
            padding: 15px; 
            border-radius: 10px; 
            margin-top: -5px; /* Rapproche le cadre du titre */
        }
        
        ul { list-style: none; padding: 0; margin: 0; }
        li { margin: 8px 0; }
        a { color: #2563eb; text-decoration: none; font-weight: 500; cursor: pointer; }
        a:hover { text-decoration: underline; color: #1e40af; }

        /* MODALE - Structure corrigÃ©e */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: #fff;
            margin: 3vh auto;
            width: 85%; /* FenÃªtre plus large demandÃ©e */
            max-width: 1100px;
            height: 90vh;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* EmpÃªche la double barre de dÃ©filement */
        }

        /* En-tÃªte de la modale fixe */
        .modal-header {
            padding: 15px 25px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: flex-end;
        }

        .close { font-size: 28px; font-weight: bold; cursor: pointer; color: #64748b; }
        .close:hover { color: #000; }

        /* Zone de texte avec scroll forcÃ© */
        .modal-body {
            flex: 1;
            overflow-y: auto !important;
            padding: 40px;
            scroll-behavior: smooth;
        }

        .modal-text-box { line-height: 1.7; color: #333; }
        .modal-image-full { max-width: 100%; height: auto; border-radius: 8px; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<div class="container">
    <h1>Guide de RandonnÃ©e PÃ©destre</h1>

    <div class="menu-section">
        <h2>Documentation</h2>
        <ul>
            <li><a onclick="chargerContenu('histoire')">ðŸ“œ Histoire de la randonnÃ©e</a></li>
            <li><a onclick="chargerContenu('bienfaits')">ðŸ©º Les bienfaits de la marche</a></li>
        </ul>
    </div>

    <div class="menu-section">
        <h2>Outils & Techniques</h2>
        <div class="liens-utiles">
            <ul>
                <li><a onclick="chargerContenu('balisage')">ðŸš© Comprendre le Balisage</a></li>
                <li><a href="https://www.ffrandonnee.fr" target="_blank">ðŸ”— Site de la FFRandonnÃ©e</a></li>
            </ul>
        </div>
    </div>
</div>

<div id="modalContenu" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <span class="close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body" id="modalInner">
            </div>
    </div>
</div>

<script>
    // Configuration des sources
    const SOURCE_DATA = {
        "balisage": { "type": "image", "url": "images/Balisage.png" },
        "histoire": { "type": "doc", "url": "documentation/histoire.html" },
        "bienfaits": { "type": "doc", "url": "documentation/bienfaits.html" }
    };

    async function chargerContenu(id) {
        const info = SOURCE_DATA[id];
        const inner = document.getElementById('modalInner');
        const modal = document.getElementById('modalContenu');
        
        if(!info) return;

        // Reset du contenu et du scroll
        inner.innerHTML = "Chargement...";
        inner.scrollTop = 0; 

        if(info.type === "image") {
            inner.innerHTML = `<img src="${info.url}" class="modal-image-full" onerror="this.src='https://via.placeholder.com/800x600?text=Image+non+trouvÃ©e'">`;
        } 
        else if(info.type === "doc") {
            try {
                // On ajoute un petit paramÃ¨tre pour Ã©viter le cache (?v=...)
                const response = await fetch(info.url + '?v=' + Date.now());
                if (!response.ok) throw new Error("Fichier introuvable");
                const html = await response.text();
                inner.innerHTML = `<div class="modal-text-box">${html}</div>`;
            } catch (err) {
                inner.innerHTML = `<div class="modal-text-box"><h2>Erreur</h2><p>${err.message}</p></div>`;
            }
        }
        
        modal.style.display = 'block';
        // Double sÃ©curitÃ© pour le scroll en haut
        setTimeout(() => { inner.scrollTop = 0; }, 50);
    }

    function closeModal() {
        document.getElementById('modalContenu').style.display = 'none';
    }

    // Fermer si on clique en dehors de la fenÃªtre blanche
    window.onclick = function(event) {
        const modal = document.getElementById('modalContenu');
        if (event.target == modal) { closeModal(); }
    }
</script>

</body>
</html>
